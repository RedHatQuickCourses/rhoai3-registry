<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab: Deploying Your AI Supply Chain :: Red Hat OpenShift AI (RHOAI) Model Registry</title>
    <link rel="prev" href="section1.html">
    <link rel="next" href="section3.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Red Hat OpenShift AI (RHOAI) Model Registry</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhoai3-registry" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat OpenShift AI (RHOAI) Model Registry</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction &amp; Value</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="section1.html">Architecture Deep Dive</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="section2.html">The QuickStart Lab</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="section3.html">The Model Catalog</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="section4.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat OpenShift AI (RHOAI) Model Registry</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat OpenShift AI (RHOAI) Model Registry</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat OpenShift AI (RHOAI) Model Registry</a></li>
    <li><a href="section2.html">The QuickStart Lab</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lab: Deploying Your AI Supply Chain</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p><strong>Theory is over. It is time to build.</strong></p>
</div>
<div class="paragraph">
<p>In this lab, you will take on the role of a <strong>Lead Platform Engineer</strong>. Your Data Science team has been downloading models randomly from Hugging Face. Your task is to establish order by deploying a <strong>Private Model Registry</strong> and forcing all future deployments to go through this governed gate.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Prerequisites</div>
<div class="ulist">
<ul>
<li>
<p><strong>Cluster Access:</strong> You are logged into an OpenShift AI 3.0 cluster via terminal (<code>oc login</code>).</p>
</li>
<li>
<p><strong>Permissions:</strong> You have <code>cluster-admin</code> or sufficient namespace privileges.</p>
</li>
<li>
<p><strong>Repository:</strong> You have cloned the course repository:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">  git clone https://github.com/RedHatQuickCourses/rhoai3-registry.git
  cd rhoai3-registry/</code></pre>
</div>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_1_dependent_infrastructure"><a class="anchor" href="#_step_1_dependent_infrastructure"></a>Step 1: Dependent Infrastructure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Model Registry is stateless. Before we can turn it on, we need two things: a <strong>Brain</strong> (Database) and a <strong>Vault</strong> (Object Storage).</p>
</div>
<div class="paragraph">
<p>We have provided a script that deploys a MySQL 8.0 instance and a MinIO object store into a new namespace called <code>rhoai-model-registry-lab</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Run the Setup Script:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">chmod u+x ./deploy/setup.sh \
./deploy/setup.sh</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Make sure you run the additional output command to set the model registry DB secret.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Verify the Pods:</strong>
Ensure the database and storage are running before proceeding.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n rhoai-model-registry-lab</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Expected Output:</strong></p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME                              READY   STATUS    RESTARTS   AGE
mysql-5d8f7-xyz                   1/1     Running   0          45s
minio-7b9c2-abc                   1/1     Running   0          45s
s3-ui-6d87f-rst.                  1/1     Running   0          20s</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_2_link_the_model_registry_to_the_database"><a class="anchor" href="#_step_2_link_the_model_registry_to_the_database"></a>Step 2: Link the Model Registry to the Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Edit the name field to change the name of the Model Registry</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat &lt;&lt;EOF | oc apply -f -
apiVersion: modelregistry.opendatahub.io/v1beta1
kind: ModelRegistry
metadata:
  name: model-registry-lab
  namespace: rhoai-model-registries
spec:
  grpc:
    port: 9090
  rest:
    port: 8080
  mysql:
    # NETWORK BRIDGE: We use the full DNS name to reach the lab namespace
    host: "mysql.rhoai-model-registry-lab.svc.cluster.local"
    port: 3306
    database: "sampledb"
    username: "admin"
    passwordSecret:
      name: "registry-db-secret"
      key: "database-password"
    sslMode: "disable"

  # (Optional) If using Postgres instead of MySQL, use the 'postgres' block instead.
EOF</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can check the OpenShift AI UI or run this command to verify that model registry is working as designed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get modelregistries.modelregistry.opendatahub.io -n rhoai-model-registries</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_step"><a class="anchor" href="#_next_step"></a>Next Step</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the Model Registry is running, it is empty.</p>
</div>
<div class="paragraph">
<p>You will run an automation pipeline that mimics a secure supply chain:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Downloads</strong> the <code>Qwen3-0.6B</code> model from Hugging Face (or uses a cached local copy).</p>
</li>
<li>
<p><strong>Uploads</strong> the weights to your private MinIO "Vault" (ensuring sovereignty).</p>
</li>
<li>
<p><strong>Registers</strong> the metadata (Version 1.0.0, Author: You) into the MySQL "Brain."</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Execute the Pipeline:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./deploy/run_pipeline.sh</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Observe the Output:</strong>
Watch the logs. You should see the "Handshake" happen:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">&gt; Connecting to Hugging Face... Done.
&gt; Downloading 'Qwen3-0.6B'... Done.
&gt; Uploading to Private MinIO Bucket (s3://private-models)... Success.
&gt; Registering with Model Registry API...
&gt; SUCCESS: Model Registered with ID: 12345</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_3_the_payoff_connecting_the_catalog"><a class="anchor" href="#_step_3_the_payoff_connecting_the_catalog"></a>Step 3: The Payoff (Connecting the Catalog)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this moment, the model is safe in your registry, but the Data Scientists cannot see it yet. The <strong>Model Catalog</strong> in the RHOAI Dashboard is still showing only the public Red Hat default models.</p>
</div>
<hr>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="section1.html">Architecture Deep Dive</a></span>
  <span class="next"><a href="section3.html">The Model Catalog</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
