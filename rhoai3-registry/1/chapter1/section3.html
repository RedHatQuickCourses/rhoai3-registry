<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab: Adding Custom Models to the OpenShift AI Model Catalog :: Red Hat OpenShift AI (RHOAI) Model Registry</title>
    <link rel="prev" href="section2.html">
    <link rel="next" href="section4.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Red Hat OpenShift AI (RHOAI) Model Registry</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhoai3-registry" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat OpenShift AI (RHOAI) Model Registry</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction &amp; Value</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="section1.html">Architecture Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="section2.html">The QuickStart Lab</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="section3.html">The Model Catalog</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="section4.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat OpenShift AI (RHOAI) Model Registry</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat OpenShift AI (RHOAI) Model Registry</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat OpenShift AI (RHOAI) Model Registry</a></li>
    <li><a href="section3.html">The Model Catalog</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Lab: Adding Custom Models to the OpenShift AI Model Catalog</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This lab guides you through manually registering external models (e.g., from Hugging Face) into the OpenShift AI Model Catalog using the file-based configuration method.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Access to the OpenShift Cluster via a terminal (<code>oc</code> CLI).</p>
</li>
<li>
<p><code>cluster-admin</code> privileges (or permissions to edit ConfigMaps in the model registry namespace).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_procedure"><a class="anchor" href="#_procedure"></a>Procedure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_switch_to_the_registry_namespace"><a class="anchor" href="#_1_switch_to_the_registry_namespace"></a>1. Switch to the Registry Namespace</h3>
<div class="paragraph">
<p>First, ensure you are working in the correct namespace where the Model Registry components are running.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc project rhoai-model-registries</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_2_open_the_catalog_configuration"><a class="anchor" href="#_2_open_the_catalog_configuration"></a>2. Open the Catalog Configuration</h3>
<div class="paragraph">
<p>The Model Catalog does not use a database for configuration; it uses a Kubernetes <strong>ConfigMap</strong>. You will edit this object directly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc edit configmap model-catalog-sources</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You are editing a <strong>ConfigMap</strong>, not a local file. The file <code>sources.yaml</code> exists virtually inside the <code>data</code> section of this object.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_3_configure_the_registry_and_add_models"><a class="anchor" href="#_3_configure_the_registry_and_add_models"></a>3. configure the Registry and Add Models</h3>
<div class="paragraph">
<p>You need to define two logical "files" inside this ConfigMap:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><code>sources.yaml</code></strong>: Registers your custom catalog path.</p>
</li>
<li>
<p><strong><code>my-models.yaml</code></strong>: Contains the actual metadata for your models.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Copy and paste the following block into the <code>data:</code> section of the ConfigMap.</p>
</div>
<div class="ulist">
<div class="title">Understanding the Schema</div>
<ul>
<li>
<p><strong>Top-Level Fields:</strong> Only <code>name</code>, <code>description</code>, <code>readme</code>, and <code>maturity</code> are allowed here.</p>
</li>
<li>
<p><strong>customProperties:</strong> You <strong>must</strong> put <code>author</code>, <code>version</code>, <code>model_type</code>, and other metadata here to avoid errors.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: model-catalog-sources
  namespace: rhoai-model-registries
data:
  # FILE 1: The Main Config - Points to your custom file
  sources.yaml: |
    catalogs:
      - name: "Model-Registry-Lab"
        id: "registry-custom-models"
        type: "yaml"
        properties:
          yamlCatalogPath: "/data/user-sources/registry-models.yaml"

  # FILE 2: Your Model Definitions (Add models here)
  registry-models.yaml: |
    models:
      # --- MODEL 1: Qwen/Qwen3-0.6B ---
      - name: "Qwen3-0.6B"
        description: "Qwen Small Language Model"
        customProperties:
          model_type:
            metadataType: MetadataStringValue
            string_value: "generative"
          author:
            metadataType: MetadataStringValue
            string_value: "Qwen"
          version:
            metadataType: MetadataStringValue
            string_value: "1.0"
        artifacts:
          - name: "model-artifact"
            uri: "hf://Qwen/Qwen3-0.6B"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_4_save_and_exit"><a class="anchor" href="#_4_save_and_exit"></a>4. Save and Exit</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Vi/Vim Users:</strong> Press <code>Esc</code>, then type <code>:wq</code> and hit <code>Enter</code>.</p>
</li>
<li>
<p><strong>Nano Users:</strong> Press <code>Ctrl+O</code>, <code>Enter</code>, then <code>Ctrl+X</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the edit is successful, you will see:
<code>configmap/model-catalog-sources edited</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_5_apply_changes_force_reload"><a class="anchor" href="#_5_apply_changes_force_reload"></a>5. Apply Changes (Force Reload)</h3>
<div class="paragraph">
<p>The catalog service attempts to "hot reload" changes, but it is best practice in a lab environment to restart the pod to ensure a clean state and immediate update.</p>
</div>
<div class="paragraph">
<p>Waiting two minutes worked everytime, the below is just in case your impatient.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc delete pod -l component=model-catalog -n rhoai-model-registries</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wait for the new pod to start (Status: <code>Running</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -l component=model-catalog -w</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_visual_verification"><a class="anchor" href="#_visual_verification"></a>Visual Verification</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your <strong>Red Hat OpenShift AI Dashboard</strong> in your browser.</p>
</li>
<li>
<p>Navigate to the <strong>Model Catalog</strong> tab in the left sidebar.</p>
</li>
<li>
<p>Look for a new section or tab (depending on UI version) labeled <strong>"Private Enterprise Registry"</strong>.</p>
</li>
<li>
<p><strong>Success:</strong> You should see the card for <strong>"Granite 7B Enterprise"</strong>.</p>
</li>
<li>
<p>Click the card. Notice that the deployment source is <strong>NOT</strong> Hugging Face. It is your private S3 bucket URI.</p>
</li>
</ol>
</div>
<div class="imageblock text-center unresolved">
<div class="content">
<img src="private-catalog-card.png" alt="private catalog card">
</div>
<div class="title">Figure 1. Your Private Model, Ready for Deployment</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Error:</strong> <code>json: unknown field "author"</code></p>
</li>
<li>
<p><strong>Fix:</strong> You placed <code>author</code> at the top level of the YAML. Move it inside <code>customProperties</code>.</p>
</li>
<li>
<p><strong>Error:</strong> <code>sources.yaml: no such file or directory</code></p>
</li>
<li>
<p><strong>Fix:</strong> You likely accidentally deleted the <code>sources.yaml</code> key in the ConfigMap. Re-copy the full YAML block from Step 3.</p>
</li>
<li>
<p><strong>Dashboard Issue:</strong> Models not visible in the UI.</p>
</li>
<li>
<p><strong>Fix:</strong> In the OpenShift AI Model Catalog, check the <strong>Source</strong> filter. Uncheck "Red Hat AI" and ensure "Training Lab Models" (or "All sources") is selected.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="section2.html">The QuickStart Lab</a></span>
  <span class="next"><a href="section4.html">Troubleshooting</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
